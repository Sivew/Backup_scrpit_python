#Creating json for Template:
echo ['{"AwsAccountId":"'$1'","AnalysisId":"'$2'","TemplateName":"'$3'"}', `aws quicksight describe-analysis --aws-account-id $1 --analysis-id $2`]| jq '{"AwsAccountId":.[0].AwsAccountId, "TemplateId":.[0].TemplateName, "Name":.[0].TemplateName, "SourceEntity":{"SourceAnalysis":{"Arn":.[1].Analysis.Arn,"DataSetReferences":[{"DataSetPlaceholder":"DS1","DataSetArn":.[1].Analysis.DataSetArns[0]},{"DataSetPlaceholder":"DS2","DataSetArn":.[1].Analysis.DataSetArns[1]},{"DataSetPlaceholder":"DS3","DataSetArn":.[1].Analysis.DataSetArns[2]},{"DataSetPlaceholder":"DS4","DataSetArn":.[1].Analysis.DataSetArns[3]},{"DataSetPlaceholder":"DS5","DataSetArn":.[1].Analysis.DataSetArns[4]}]}}}|del(.SourceEntity[].DataSetReferences[]|select(.DataSetArn == null))'>$4/Analysis/create-template.json
